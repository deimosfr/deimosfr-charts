apiVersion: v1
kind: Pod
metadata:
  name: "{{ include "bentopdf.fullname" . }}-test-connection"
  labels:
    {{- include "bentopdf.labels" . | nindent 4 }}
  annotations:
    "helm.sh/hook": test
    ignore-check.kube-linter.io/default-service-account: "Test pod does not need dedicated SA"
    ignore-check.kube-linter.io/latest-tag: "Test pod using busybox latest is acceptable"
    ignore-check.kube-linter.io/no-liveness-probe: "Test pod runs to completion"
    ignore-check.kube-linter.io/no-readiness-probe: "Test pod runs to completion"
    ignore-check.kube-linter.io/restart-policy: "Test pod uses restartPolicy: Never by design"
    ignore-check.kube-linter.io/run-as-non-root: "Test pod using busybox"
    ignore-check.kube-linter.io/no-read-only-root-fs: "Test pod using busybox"
spec:
  containers:
    - name: wget
      image: busybox
      command: ['wget']
      args: ['{{ include "bentopdf.fullname" . }}:{{ .Values.service.port }}']
  restartPolicy: Never
